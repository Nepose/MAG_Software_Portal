"use strict";function reloadStyles(){var time=+new Date;Array.prototype.slice.call(document.head.getElementsByTagName("link")).forEach(function(tag){tag.href=tag.href.split("?_")[0]+"?_="+time})}function reloadAllScripts(filter){for(var scripts=document.head.getElementsByTagName("script"),filtered=!1,script=null,src="",i=0;i<scripts.length;i++)script=scripts[i],filtered=!1,src=void 0,"text/javascript"===script.type&&void 0!==script.attributes.src&&(filtered||(src=script.src,script.parentNode.removeChild(script),-1!==src.indexOf("?_")&&(src=src.substr(0,src.indexOf("?_"))),loadScript(src)))}function reloadScripts(src){for(var scripts=document.head.getElementsByTagName("script"),curr_time=(new Date).getTime(),i=0,script=null,src="";i<scripts.length;i++)script=scripts[i],"text/javascript"===script.type&&-1!==script.src.indexOf(src)&&(src=script.src+curr_time,script.parentNode.removeChild(script),loadScript(src))}function reloadPage(){gSTB.Stop(),window.location.reload(!0)}function imposeImageToScreen(image,opacity){imposeImageToScreen.image=element("div"),imposeImageToScreen.image.style.width=WINDOW_WIDTH+"px",imposeImageToScreen.image.style.height=WINDOW_HEIGHT+"px",imposeImageToScreen.image.style.position="absolute",imposeImageToScreen.image.style.background='url("'+image+'") no-repeat',imposeImageToScreen.image.style.opacity=opacity||1,imposeImageToScreen.image.style.zIndex=1e3,document.body.appendChild(imposeImageToScreen.image)}function focusTracker(){focusTracker.state=!focusTracker.state,focusTracker.state?(console.log("focus tracking: started"),focusTracker.focus=Element.prototype.focus,focusTracker.blur=Element.prototype.blur,focusTracker.select=HTMLInputElement.prototype.select,Element.prototype.focus=function(){console.log("focus",this),focusTracker.focus.call(this)},Element.prototype.blur=function(){console.log("blur",this),focusTracker.blur.call(this)},HTMLInputElement.prototype.select=function(){console.log("select",this),focusTracker.select.call(this)}):(console.log("focus tracking: stopped"),Element.prototype.focus=focusTracker.focus,Element.prototype.blur=focusTracker.blur,HTMLInputElement.prototype.select=focusTracker.select)}function elattr(obj,attr){if(obj&&obj.nodeType&&attr&&attr instanceof Object)for(var key in attr)attr.hasOwnProperty(key)&&(obj[key]=attr[key]);return obj}function element(name,attr,data){var tag=document.createElement(name);return elattr(tag,attr),elchild(tag,data),tag}function elchild(obj,value){if(obj&&value)if(value.nodeType)obj.appendChild(value);else if(Array.isArray(value))for(var i=0;i<value.length;i++)elchild(obj,value[i]);else obj.appendChild(document.createTextNode(value));return obj}function elclear(obj){if(null!==obj&&obj.nodeName&&obj.hasChildNodes())for(;obj.hasChildNodes();)obj.removeChild(obj.firstChild);return obj}function loadScript(src,onload,onerror){var elem=document.createElement("script");elem.type="text/javascript",elem.src=src,"function"==typeof onload&&(elem.onload=onload),"function"==typeof onerror&&(elem.onerror=onerror),document.head.appendChild(elem)}function getCurrentLanguage(langList){var langEnv=JSON.parse(gSTB.GetEnv('{"varList":["language"]}')),langVal="en";return langList=langList||["en","ru","uk","de","tr"],!langEnv.errMsg&&langEnv.result&&langEnv.result.language&&"string"==typeof langEnv.result.language&&(langEnv.result.language=langEnv.result.language.toLowerCase(),-1!==langList.indexOf(langEnv.result.language)&&(langVal=langEnv.result.language)),langVal}function getEnvList(list){var data;try{if(data=JSON.parse(gSTB.GetEnv(JSON.stringify({varList:list}))),""!==data.errMsg)throw new Error(data.errMsg);return data.result}catch(e){echo(e)}return!1}function getEnv(name){var data=getEnvList([name]);return data!==!1&&void 0!==data[name]?data[name]:data}function setEnv(key,value){var vars={};return vars[key]=value,setEnvList(vars)}function setEnvList(hash){try{return gSTB.SetEnv(JSON.stringify(hash))}catch(e){echo(e)}return!1}function eventPrepare(event,stopBubble,label){return void 0!==event.code?!0:(event.code=event.keyCode||event.which,0===event.code?!1:(event.shiftKey&&(event.code+=1e3),event.altKey&&(event.code+=2e3),event.code===KEYS.USB_MOUNTED||event.code===KEYS.USB_UNMOUNTED?!1:(stopBubble!==!1&&event.stopPropagation(),echo(event.code+"	"+event.shiftKey+"	"+event.ctrlKey+"	"+event.altKey+"	"+event.srcElement.id+"	"+event.target.id+"	"+(label||""),"keyDown [code/shift/ctrl/alt/src/target]"),!0)))}function ajax(method,url,callback,headers,type,async){var hname,jdata=null,timeout=null,xhr=new XMLHttpRequest,title="AJAX "+method.toUpperCase()+" "+url;if(async=async!==!1,xhr.onreadystatechange=function(){if(4===xhr.readyState)if(clearTimeout(timeout),ajax.stop)echo(xhr.status,title),"function"==typeof callback&&callback(null,null,null);else{if(echo("status:"+xhr.status+", length:"+xhr.responseText.length,title),"json"===type&&200===xhr.status)try{jdata=JSON.parse(xhr.responseText)}catch(e){echo(e,"AJAX JSON.parse"),jdata=null}"function"==typeof callback&&callback("xml"===type?xhr.responseXML:"json"===type?jdata:xhr.responseText,xhr.status,xhr)}},xhr.open(method,url,async),headers)for(hname in headers)headers.hasOwnProperty(hname)&&xhr.setRequestHeader(hname,headers[hname]);return xhr.send(),echo("sent",title),timeout=setTimeout(function(){xhr.abort(),echo("ABORT on timeout",title),"function"==typeof callback&&callback(null,0)},6e4),xhr}function imageLoader(imgList,callback){var count=1,onload=function(){imgList.length===count&&"function"==typeof callback?callback():count++};Array.isArray(imgList)&&imgList.length>0?imgList.forEach(function(item){var img=new Image;img.src=item,img.onload=onload,img.onerror=function(){throw"Image "+item+" load fail"}}):0===imgList.length&&callback()}function getStorageInfo(){var snList={},info=JSON.parse(gSTB.GetStorageInfo("{}"));Array.isArray(info.result)&&""===info.errMsg&&info.result.length>0?(info.result.forEach(function(item){item.mediaType="000022272228"===item.sn?3:item.mediaType,item.label=item.label.trim(),snList[item.sn]?snList[item.sn]++:snList[item.sn]=1}),info.result.forEach(function(item){item.label||(item.label=item.vendor+" "+item.model.replace(/\//,""),snList[item.sn]>1&&(item.label+=" #"+item.partitionNum)),item.isReadOnly&&(item.label+=" ("+_("Read only")+")")}),info.result.sort(function(a,b){return a.mountPath<b.mountPath?-1:1}),window.STORAGE_INFO=info.result):window.STORAGE_INFO=[];try{window.HDD_INFO=JSON.parse(gSTB.RDir("get_hdd_info")||"[]")}catch(e){echo(e,"get_hdd_info"),window.HDD_INFO=[]}echo(STORAGE_INFO,"STORAGE_INFO"),echo(HDD_INFO,"HDD_INFO")}function parseUri(str){for(var o=parseUri.options,m=o.parser[o.strictMode?"strict":"loose"].exec(str),uri={},i=14;i--;)uri[o.key[i]]=m[i]||"";return uri[o.q.name]={},uri[o.key[12]].replace(o.q.parser,function($0,$1,$2){$1&&(uri[o.q.name][$1]=$2)}),uri}function validateUrl(url,sol,isSolutionOptional,isProtocolOptional){var solReg="((ffmpeg|auto|rtp|rtsp|mp3|mpegps|mpegts|mp4|ifm|fm|ffrt|ffrt2|ffrt3|ffrt4)(\\s))";return isProtocolOptional=typeof isProtocolOptional==typeof!0?isProtocolOptional:!0,new RegExp("^"+(sol?solReg:"")+["","?"][+!!isSolutionOptional]+"(((http|https|udp|rtp|rtsp|mms|mmsh|mmst|rtmp|igmp):\\/\\/)"+["","?"][+isProtocolOptional]+"@?(([a-zA-Z0-9Ð°-ÑÐ-Ð¯$\\-_.+!*'(),;:&=]|%[0-9a-fA-FÐ°-ÑÐ-Ð¯]{2})+@)?(((25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])(\\.(25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])){3})|localhost|([a-zA-ZÐ°-ÑÐ-Ð¯0-9\\-\\u00C0-\\u017F]+\\.)+([a-zA-ZÐ°-ÑÐ-Ð¯]{2,}))(:[0-9]+)?|((file:///|/)[a-zA-ZÐ°-ÑÐ-Ð¯0-9\\-\\u00C0-\\u017F]+))(\\/(([a-zA-ZÐ°-ÑÐ-Ð¯0-9$\\-_.+!*'(),;:@&=\\s]|%[0-9a-fA-FÐ°-ÑÐ-Ð¯]{2})*(\\/([a-zA-ZÐ°-ÑÐ-Ð¯0-9$\\-_.+!*'(),;:@&=\\s]|%[0-9a-fA-FÐ°-ÑÐ-Ð¯]{2})*)*)?(\\?([a-zA-ZÐ°-ÑÐ-Ð¯0-9$\\-_.+!*'(),;:@&=\\/?]|%[0-9a-fA-FÐ°-ÑÐ-Ð¯]{2})*)?(\\#([a-zA-ZÐ°-ÑÐ-Ð¯0-9$\\-_.+!*'(),;:@&=\\/?]|%[0-9a-fA-FÐ°-ÑÐ-Ð¯]{2})*)?)?$").test(url)}function extend(target,source,override){var _target=override===!1?extend({},target):target||{};for(var prop in source)"object"!=typeof _target[prop]||"object"!=typeof source[prop]||Array.isArray(_target[prop])||Array.isArray(source[prop])?_target[prop]=source[prop]:_target[prop]=extend(_target[prop],source[prop],override);return _target}function base64Encode(data){return btoa(unescape(encodeURIComponent(data)))}function base64Decode(data){try{return decodeURIComponent(escape(atob(data)))}catch(error){echo(error,"base64Decode Error")}}function cutTextWithEllipsis(text,length){return text.length>length?text.toString().slice(0,length)+"...":text}function parseDate(dateStr){if(!dateStr)return new Date(NaN);var date=new Date(dateStr.match(/\w{3}\s\w{3}\s\d{1,2}\s\d{1,2}:\d{1,2}:\d{1,2}/)+" "+dateStr.match(/\d{4}/)),timeZone=dateStr.match(/(\w{1,4}|((\+|-)\d{1,2}))\s+\d{4}/)[1],offset=timeZoneOffsets[timeZone];return date.setMinutes(date.getMinutes()-date.getTimezoneOffset()),0!==offset.index&&date.setMinutes(date.getMinutes()+(offset.minutes||0)*offset.index),date}function getMediaType(file){var extension=file.split(".").pop().toLowerCase();if(extension&&-1!==configuration.registersTypes.indexOf(extension))for(var type,i=0;i<MEDIA_TYPES.length,type=MEDIA_TYPES[i];i++)if(-1!==MEDIA_EXTENSION[type].indexOf(extension))return type;return MEDIA_TYPE_NONE}function readJSON(path,fileName){var result,xmlhttp=new XMLHttpRequest;path=path+"/"+fileName;try{xmlhttp.open("GET",path,!1),xmlhttp.send(null),result=xmlhttp.responseText}catch(e){echo(e,"some xmlhttp error"),result=""}return echo(result,"file "+path),result}var DEBUG=!0,DEBUG_NAME="",DEBUG_SERVER="",EMULATION=!1,PATH_MODE_WEB=!1,PATH_ROOT=null,PATH_SYSTEM=null,PATH_MEDIA="/media/",WINDOW_WIDTH=screen.width,WINDOW_HEIGHT=screen.height,URL_PARAMS={},initFound=!1,proxy;PATH_ROOT=location.pathname.split("/"),PATH_ROOT[PATH_ROOT.length-1]="",PATH_ROOT=PATH_ROOT.join("/"),PATH_ROOT=location.protocol+"//"+location.host+PATH_ROOT+PATH_BASE,PATH_SYSTEM=PATH_ROOT+"system/",document.location.search&&document.location.search.substring(1).split("&").forEach(function(part){part=part.split("="),2===part.length&&(URL_PARAMS[part[0]]=decodeURIComponent(part[1]))}),void 0===window.gSTB?(DEBUG=EMULATION=!0,DEBUG_SERVER=DEBUG_SERVER||localStorage.getItem("DEBUG_SERVER"),DEBUG_NAME=DEBUG_NAME||localStorage.getItem("DEBUG_NAME"),WINDOW_WIDTH=parseInt(URL_PARAMS.width,10)||window.outerWidth,WINDOW_HEIGHT=parseInt(URL_PARAMS.height,10)||window.outerHeight,document.write('<script type="text/javascript" src="'+PATH_SYSTEM+'gstb.js"></script>\n'),document.write('<script type="text/javascript" src="'+PATH_SYSTEM+'debug.js"></script>\n'),document.write('<script type="text/javascript" src="http://'+DEBUG_SERVER+':8800/file/client.js"></script>\n'),document.write('<script type="text/javascript">if ( window.proxyClient ) {proxy = new proxyClient();if ( DEBUG_NAME && DEBUG_SERVER ) proxy.init({name:"'+DEBUG_NAME+'", host:"'+DEBUG_SERVER+'"}); }</script>\n'),window.addEventListener("load",function(){document.body.style.backgroundColor="black"})):(gSTB.SetNativeStringMode(!0),function(){var vars=JSON.parse(gSTB.GetEnv(JSON.stringify({varList:["debug","debug_name","debug_server"]})));!vars.errMsg&&vars.result&&(DEBUG="1"===vars.result.debug,DEBUG&&!URL_PARAMS.nodebug&&(document.write('<script type="text/javascript" src="'+PATH_SYSTEM+'debug.js"></script>\n'),DEBUG_NAME=DEBUG_NAME||vars.result.debug_name,DEBUG_SERVER=DEBUG_SERVER||vars.result.debug_server,DEBUG_NAME&&DEBUG_SERVER&&"1"!==stbStorage.getItem("spyjs.active")&&document.write('<script type="text/javascript" src="http://'+DEBUG_SERVER+":8000/target/target-script-min.js#"+DEBUG_NAME+'"></script>\n')))}());var PATH_IMG_SYSTEM=PATH_SYSTEM+"img/"+WINDOW_WIDTH+"/",PATH_IMG_PUBLIC=PATH_ROOT+"public/img/"+WINDOW_WIDTH+"/",echo=function(data,title){EMULATION&&console.log(title?title:"log:",data);var red="[31m",bold="[1m",green="[32m",reset="[0m",type=Object.prototype.toString.call(data).match(/\s([a-z|A-Z]+)/)[1];return type="Error"===type?red+type+reset:green+type+reset,(data instanceof Object||Array.isArray(data))&&(data=data.nodeName?data.outerHTML:JSON.stringify(data,null,4)),title=title||"",gSTB.Debug("["+type+"]	"+(title?bold+title+green+":	"+reset:"")+data),data};!function(){window.addEventListener("keydown",function(event){switch(event.code){case 97:echo("reload page"),reloadPage();break;case 98:echo("reload CSS"),reloadStyles();break;case 99:reloadAllScripts(["target-script-min.js"]);break;case 100:echo("toggle grid"),imposeImageToScreen.image?(document.body.removeChild(imposeImageToScreen.image),delete imposeImageToScreen.image):imposeImageToScreen(PATH_SYSTEM+"grid."+WINDOW_HEIGHT+".png");break;case 103:"1"!==stbStorage.getItem("spyjs.active")?(stbStorage.setItem("spyjs.active",1),console.log("SpyJS: enable"),console.log("SpyJS: set proxy to "+location.hostname+":3546"),gSTB.SetWebProxy(location.hostname,3546,"","",""),location.reload()):(stbStorage.setItem("spyjs.active",0),gSTB.ResetWebProxy(),console.log("SpyJS: disable"),location.reload());break;case 104:focusTracker();break;case 220:echo("\n\n\n<html><head>\n"+document.head.innerHTML+"\n</head>\n<body>\n"+document.body.innerHTML+"\n</body>\n</html>\n")}})}(),Function.prototype.bind||(Function.prototype.bind=function(oThis){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP&&oThis?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))};return fNOP.prototype=this.prototype,fBound.prototype=new fNOP,fBound});var KEYS={BACK:8,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,NUM9:57,NUM0:48,DELETE:46,CHANNEL_PREV:1009,CHANNEL_NEXT:9,OK:13,EXIT:27,UP:38,DOWN:40,LEFT:37,RIGHT:39,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,VOLUME_UP:107,VOLUME_DOWN:109,F1:112,F2:113,F3:114,F4:115,REFRESH:116,FRAME:117,PHONE:119,EPG:119,SET:120,TV:121,MENU:122,WEB:123,MIC:2032,REWIND:2066,FORWARD:2070,APP:2076,USB_MOUNTED:2080,USB_UNMOUNTED:2081,PLAY_PAUSE:2082,STOP:2083,POWER:2085,RECORD:2087,INFO:2089,MUTE:2192,CLOCK:2032,AUDIO:2071,KEYBOARD:2076};if(void 0===window.echo&&(window.echo=function(data,title){}),ajax.stop=!1,parseUri.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},!("classList"in document.documentElement)){var prototype=Array.prototype,indexOf=prototype.indexOf,slice=prototype.slice,push=prototype.push,splice=prototype.splice,join=prototype.join;window.DOMTokenList=function(el){if(this._element=el,el.className!==this._classCache){if(this._classCache=el.className,!this._classCache)return;var i,classes=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(i=0;i<classes.length;i++)push.call(this,classes[i])}},window.DOMTokenList.prototype={add:function(token){this.contains(token)||(push.call(this,token),this._element.className=slice.call(this,0).join(" "))},contains:function(token){return-1!==indexOf.call(this,token)},item:function(index){return this[index]||null},remove:function(token){var i=indexOf.call(this,token);-1!==i&&(splice.call(this,i,1),this._element.className=slice.call(this,0).join(" "))},toString:function(){return join.call(this," ")},toggle:function(token){return this.contains(token)?this.remove(token):this.add(token),this.contains(token)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}var Events={bind:function(event,callback){if(this._events||(this._events={}),"object"==typeof event)for(var name in event)this.bind(name,event[name]);else"string"==typeof event&&"function"==typeof callback&&(void 0===this._events[event]&&(this._events[event]=[]),this._events[event].push(callback))},trigger:function(event,data){var result,results=[],self=this;return void 0!==event&&void 0!==this._events&&void 0!==this._events[event]&&this._events[event].forEach(function(ev){result=ev.call(self,data),void 0!==result&&results.push(result)}),results},unbind:function(event){delete this._events[event]},inject:function(obj){"function"==typeof obj?extend(obj.prototype,this):"object"==typeof obj&&extend(obj,this)}},timeZoneOffsets={A:{index:-1,minutes:60},ACDT:{index:-1,minutes:60},ACST:{index:-1,minutes:570},ACT:{index:1,minutes:300},ACWST:{index:-1,minutes:525},ADT:{index:1,minutes:180},AEDT:{index:-1,minutes:61},AEST:{index:-1,minutes:60},AFT:{index:-1,minutes:270},AKDT:{index:1,minutes:480},AKST:{index:1,minutes:540},ALMT:{index:-1,minutes:360},AMST:{index:1,minutes:180},AMT:{index:1,minutes:240},ANAST:{index:-1,minutes:62},ANAT:{index:-1,minutes:62},AQTT:{index:-1,minutes:300},ART:{index:1,minutes:180},AST:{index:1,minutes:240},AWDT:{index:-1,minutes:540},AWST:{index:-1,minutes:480},AZOST:{index:0,minutes:0},AZOT:{index:1,minutes:60},AZST:{index:-1,minutes:300},AZT:{index:-1,minutes:240},B:{index:-1,minutes:120},BNT:{index:-1,minutes:480},BOT:{index:1,minutes:240},BRST:{index:1,minutes:120},BRT:{index:1,minutes:180},BST:{index:-1,minutes:60},BTT:{index:-1,minutes:360},C:{index:-1,minutes:180},CAST:{index:-1,minutes:480},CAT:{index:-1,minutes:120},CCT:{index:-1,minutes:390},CDT:{index:1,minutes:300},CEST:{index:-1,minutes:120},CET:{index:-1,minutes:60},CHADT:{index:-1,minutes:63},CHAST:{index:-1,minutes:62},CHOT:{index:-1,minutes:480},CHUT:{index:-1,minutes:600},CKT:{index:1,minutes:60},CLST:{index:1,minutes:180},CLT:{index:1,minutes:240},COT:{index:1,minutes:300},CST:{index:1,minutes:360},CVT:{index:1,minutes:60},CXT:{index:-1,minutes:420},ChST:{index:-1,minutes:60},D:{index:-1,minutes:240},DAVT:{index:-1,minutes:420},E:{index:-1,minutes:300},EASST:{index:1,minutes:300},EAST:{index:1,minutes:360},EAT:{index:-1,minutes:180},ECT:{index:1,minutes:300},EDT:{index:-1,minutes:61},EEST:{index:-1,minutes:180},EET:{index:-1,minutes:120},EGST:{index:0,minutes:0},EGT:{index:1,minutes:60},EST:{index:1,minutes:300},ET:{index:1,minutes:300},F:{index:-1,minutes:360},FET:{index:-1,minutes:180},FJST:{index:-1,minutes:63},FJT:{index:-1,minutes:62},FKST:{index:1,minutes:180},FKT:{index:1,minutes:240},FNT:{index:1,minutes:120},G:{index:-1,minutes:420},GALT:{index:1,minutes:360},GAMT:{index:1,minutes:540},GET:{index:-1,minutes:240},GFT:{index:1,minutes:180},GILT:{index:-1,minutes:62},GMT:{index:0,minutes:0},GST:{index:-1,minutes:240},GYT:{index:1,minutes:240},H:{index:-1,minutes:480},HAA:{index:1,minutes:180},HAC:{index:1,minutes:300},HADT:{index:1,minutes:540},HAE:{index:1,minutes:240},HAP:{index:1,minutes:420},HAR:{index:1,minutes:360},HAST:{index:1,minutes:60},HAT:{index:1,minutes:150},HAY:{index:1,minutes:480},HKT:{index:-1,minutes:480},HLV:{index:1,minutes:270},HNA:{index:1,minutes:240},HNC:{index:1,minutes:360},HNE:{index:1,minutes:300},HNP:{index:1,minutes:480},HNR:{index:1,minutes:420},HNT:{index:1,minutes:210},HNY:{index:1,minutes:540},HOVT:{index:-1,minutes:420},I:{index:-1,minutes:540},ICT:{index:-1,minutes:420},IDT:{index:-1,minutes:180},IOT:{index:-1,minutes:360},IRDT:{index:-1,minutes:270},IRKST:{index:-1,minutes:540},IRKT:{index:-1,minutes:540},IRST:{index:-1,minutes:210},IST:{index:-1,minutes:60},JST:{index:-1,minutes:540},K:{index:-1,minutes:60},KGT:{index:-1,minutes:360},KOST:{index:-1,minutes:660},KRAST:{index:-1,minutes:480},KRAT:{index:-1,minutes:480},KST:{index:-1,minutes:540},KUYT:{index:-1,minutes:240},L:{index:-1,minutes:61},LHDT:{index:-1,minutes:61},LHST:{index:-1,minutes:60},LINT:{index:-1,minutes:64},M:{index:-1,minutes:62},MAGST:{index:-1,minutes:62},MAGT:{index:-1,minutes:62},MART:{index:1,minutes:570},MAWT:{index:-1,minutes:300},MDT:{index:1,minutes:360},MESZ:{index:-1,minutes:120},MEZ:{index:-1,minutes:60},MHT:{index:-1,minutes:62},MMT:{index:-1,minutes:390},MSD:{index:-1,minutes:240},MSK:{index:-1,minutes:240},MST:{index:1,minutes:420},MUT:{index:-1,minutes:240},MVT:{index:-1,minutes:300},MYT:{index:-1,minutes:480},N:{index:1,minutes:60},NCT:{index:-1,minutes:61},NDT:{index:1,minutes:150},NFT:{index:-1,minutes:61},NOVST:{index:-1,minutes:420},NOVT:{index:-1,minutes:360},NPT:{index:-1,minutes:345},NRT:{index:-1,minutes:720},NST:{index:1,minutes:210},NUT:{index:1,minutes:61},NZDT:{index:-1,minutes:63},NZST:{index:-1,minutes:62},O:{index:1,minutes:120},OMSST:{index:-1,minutes:420},OMST:{index:-1,minutes:420},ORAT:{index:-1,minutes:300},P:{index:1,minutes:180},PDT:{index:1,minutes:420},PET:{index:1,minutes:300},PETST:{index:-1,minutes:62},PETT:{index:-1,minutes:62},PGT:{index:-1,minutes:60},PHOT:{index:-1,minutes:63},PHT:{index:-1,minutes:480},PKT:{index:-1,minutes:300},PMDT:{index:1,minutes:120},PMST:{index:1,minutes:180},PONT:{index:-1,minutes:61},PST:{index:1,minutes:480},PT:{index:1,minutes:480},PWT:{index:-1,minutes:540},PYST:{index:1,minutes:180},PYT:{index:1,minutes:240},Q:{index:1,minutes:240},QYZT:{index:1,minutes:360},R:{index:1,minutes:300},RET:{index:-1,minutes:240},S:{index:1,minutes:360},SAKT:{index:1,minutes:600},SAMT:{index:-1,minutes:240},SAST:{index:-1,minutes:120},SBT:{index:-1,minutes:61},SCT:{index:-1,minutes:240},SGT:{index:-1,minutes:480},SRET:{index:-1,minutes:660},SRT:{index:1,minutes:180},SST:{index:1,minutes:61},T:{index:1,minutes:420},TAHT:{index:1,minutes:60},TFT:{index:-1,minutes:300},TJT:{index:-1,minutes:300},TKT:{index:-1,minutes:63},TLT:{index:-1,minutes:540},TMT:{index:-1,minutes:300},TOT:{index:-1,minutes:780},TVT:{index:-1,minutes:62},U:{index:1,minutes:480},ULAT:{index:-1,minutes:480},UTC:{index:0,minutes:0},UYST:{index:1,minutes:120},UYT:{index:1,minutes:180},UZT:{index:-1,minutes:300},V:{index:1,minutes:540},VET:{index:1,minutes:270},VLAST:{index:-1,minutes:61},VLAT:{index:-1,minutes:61},VUT:{index:-1,minutes:61},W:{index:1,minutes:60},WARST:{index:1,minutes:180},WAST:{index:-1,minutes:120},WAT:{index:-1,minutes:60},WEST:{index:-1,minutes:60},WESZ:{index:-1,minutes:60},WET:{index:0,minutes:0},WEZ:{index:0,minutes:0},WFT:{index:-1,minutes:62},WGST:{index:1,minutes:120},WGT:{index:1,minutes:180},WIB:{index:-1,minutes:420},WIT:{index:-1,minutes:540},WITA:{index:-1,minutes:480},WST:{index:-1,minutes:63},WT:{index:0,minutes:0},X:{index:1,minutes:61},Y:{index:1,minutes:62},YAKST:{index:-1,minutes:60},YAKT:{index:-1,minutes:60},YAPT:{index:-1,minutes:60},YEKST:{index:-1,minutes:360},YEKT:{index:-1,minutes:360},Z:{index:0,minutes:0},"-12":{index:-1,minutes:720},"-11":{index:-1,minutes:660},"-10":{index:-1,minutes:600},"-09":{index:-1,minutes:540},"-08":{index:-1,minutes:480},"-07":{index:-1,minutes:420},"-06":{index:-1,minutes:360},"-05":{index:-1,minutes:300},"-04":{index:-1,minutes:240},"-03":{index:-1,minutes:180},"-02":{index:-1,minutes:120},"-01":{index:-1,minutes:60},"+01":{index:1,minutes:60},"+02":{index:1,minutes:120},"+03":{index:1,minutes:180},"+04":{index:1,minutes:240},"+05":{index:1,minutes:300},"+06":{index:1,minutes:360},"+07":{index:1,minutes:420},"+08":{index:1,minutes:480},"+09":{index:1,minutes:540},"+10":{index:1,minutes:600},"+11":{index:1,minutes:660},"+12":{index:1,minutes:720}};Array.prototype.shuffle=function(){for(var i,tmp,n=this.length;n--;)i=Math.floor(n*Math.random()),tmp=this[i],this[i]=this[n],this[n]=tmp;return this};var navigationRows=[],rowNumber=0,defaultClassName="elementTr",STORAGE_INFO,REGISTERED_TYPES=["mpg","mpeg","mkv","avi","ts","tspinf","m4a","mp3","mp4","ac3","mov","vob","wav","ape","mts","m2t","m2v","ogg","oga","divx","aiff","m2ts","wv","m2p","tp","flv","tta","mod","tod","asf","wma","wmv","flac","ape","cue","m3u","jpg","jpeg","png","bmp","tif","tiff","iso","aac","mpl","txt","srt","sub","ass","ttf"],aspects=[{name:"fit",mode:16,text:"Fit on"},{name:"big",mode:64,text:"Zoom"},{name:"opt",mode:80,text:"Optimal"},{name:"exp",mode:0,text:"Stretch"}],fontPath="/home/default",playbackStopped=!1,contentWrapper=null,volume={timer:null,hideTimeOut:3e3,def:100,step:5},environment={audio_initial_volume:null},playbackTimer=null,secondsSpan=null,minutesSpan=null,hoursSpan=null,pageElements={contentType:{name:"contentType",title:"Type",type:"select",data:[{value:"auto",title:"auto"},{value:"rtp",title:"rtp"},{value:"rtsp",title:"rtsp"},{value:"rtpac3",title:"rtpac3"},{value:"rtsp_ac3",title:"rtsp_ac3"},{value:"rtpmpeg4",title:"rtpmpeg4"},{value:"rtpmpeg4_aac",title:"rtpmpeg4_aac"},{value:"mpegts",title:"mpegts"},{value:"mpegps",title:"mpegps"},{value:"file",title:"file"},{value:"mp4",title:"mp4"},{value:"mp4_mpa",title:"mp4_mpa"},{value:"fm",title:"fm"},{value:"ffmpeg",title:"ffmpeg"},{value:"ffrt",title:"ffrt"},{value:"ffrt2",title:"ffrt2"},{value:"ffrt3",title:"ffrt3"}],value:"auto",handler:["PlaySolution"],domElement:null,onChange:function(){handlers.PlaySolution.action()}},contentPath:{name:"contentPath",title:"Path",type:"input",value:"rtp://239.1.1.1:1234",handler:["PlaySolution"],domElement:null},contentSource:{name:"contentSource",title:"Source",type:"select",data:[],handler:["PlaySolution"],domElement:null,onChange:function(){page.getStorageFiles(pageElements.contentSource.domElement.value)}},storageFile:{name:"storageFile",title:"File",type:"select",data:[],handler:["PlaySolution"],domElement:null,active:!1},windowMode:{name:"windowMode",title:"Mode",type:"select",data:[{value:0,title:"window"},{value:1,title:"full screen"}],value:1,handler:["SetPIG"],domElement:null,onChange:function(){if(parseInt(pageElements.windowMode.domElement.value)){for(var i=0;i<pageElements.windowMode.managedElements.length;i++)pageElements[pageElements.windowMode.managedElements[i]].domElement.disabled=!0,pageElements[pageElements.windowMode.managedElements[i]].domElement.className+=" disabled",pageElements[pageElements.windowMode.managedElements[i]].domElement.value="";pageElements.windowScale.domElement.value=256,pageElements.windowAspect.domElement.disabled=!1,pageElements.windowAspect.domElement.className="",handlers.SetPIG.action()}else{for(var i=0;i<pageElements.windowMode.managedElements.length;i++)"windowWidth"!==pageElements.windowMode.managedElements[i]&&"windowHeight"!==pageElements.windowMode.managedElements[i]&&(pageElements[pageElements.windowMode.managedElements[i]].domElement.disabled=!1,pageElements[pageElements.windowMode.managedElements[i]].domElement.className="");pageElements.coordX.domElement.value=0,pageElements.coordY.domElement.value=0,pageElements.windowAspect.domElement.disabled=!0,pageElements.windowAspect.domElement.className+=" disabled",handlers.SetPIG.action()}},managedElements:["windowScale","windowWidth","windowHeight","coordX","coordY"]},windowScale:{name:"windowScale",title:"Scale",type:"select",data:[{value:64,title:"1:4"},{value:128,title:"1:2"},{value:256,title:"1:1"},{value:512,title:"2:1"},{value:"custom",title:"custom"}],value:256,handler:["SetPIG"],domElement:null,onChange:function(){var videoInfo={};if("custom"===pageElements.windowScale.domElement.value){videoInfo=page.getVideoInfo();for(var i=0;i<pageElements.windowScale.managedElements.length;i++)pageElements[pageElements.windowScale.managedElements[i]].domElement.disabled=!1,pageElements[pageElements.windowScale.managedElements[i]].domElement.className="";pageElements.windowWidth.domElement.value=videoInfo.pictureWidth,pageElements.windowHeight.domElement.value=videoInfo.pictureHeight,handlers.SetViewport.action()}else{for(var i=0;i<pageElements.windowScale.managedElements.length;i++)pageElements[pageElements.windowScale.managedElements[i]].domElement.disabled=!0,pageElements[pageElements.windowScale.managedElements[i]].domElement.className+=" disabled";pageElements.windowWidth.domElement.value="",pageElements.windowHeight.domElement.value="",handlers.SetPIG.action()}},managedElements:["windowWidth","windowHeight"]},windowWidth:{name:"windowWidth",title:"Width",type:"input",value:null,handler:["SetViewport"],domElement:null},windowHeight:{name:"windowHeight",title:"Height",type:"input",value:null,handler:["SetViewport"],domElement:null},coordX:{name:"coordX",title:"X",type:"input",value:null,handler:["SetPIG","SetViewport"],domElement:null},coordY:{name:"coordY",title:"Y",type:"input",value:null,handler:["SetPIG","SetViewport"],domElement:null},windowAspect:{name:"windowAspect",title:"Aspect",type:"select",data:[{value:aspects[0].mode,title:aspects[0].text},{value:aspects[1].mode,title:aspects[1].text},{value:aspects[2].mode,title:aspects[2].text},{value:aspects[3].mode,title:aspects[3].text}],value:aspects[0].mode,handler:["SetAspect"],domElement:null,onChange:function(){handlers.SetAspect.action()}},windowOnTop:{name:"windowOnTop",title:"On top of all windows",type:"select",data:[{value:1,title:"on"},{value:0,title:"off"}],value:0,handler:["SetTopWin"],domElement:null,onChange:function(){handlers.SetTopWin.action()}},videoWindow:{name:"videoWindow",title:"Video window",type:"input",value:255,handler:["SetWinAlphaLevel"],domElement:null},graphicalWindow:{name:"graphicalWindow",title:"Graphical window",type:"input",value:200,handler:["SetWinAlphaLevel"],domElement:null},chromaKeyState:{name:"chromaKeyState",title:"State",type:"select",data:[{value:1,title:"on"},{value:0,title:"off"}],value:0,handler:["SetWinMode"],domElement:null,onChange:function(){if(parseInt(pageElements.chromaKeyState.domElement.value))for(var i=0;i<pageElements.chromaKeyState.managedElements.length;i++)pageElements[pageElements.chromaKeyState.managedElements[i]].domElement.disabled=!1,pageElements[pageElements.chromaKeyState.managedElements[i]].domElement.className="";else for(var i=0;i<pageElements.chromaKeyState.managedElements.length;i++)pageElements[pageElements.chromaKeyState.managedElements[i]].domElement.disabled=!0,pageElements[pageElements.chromaKeyState.managedElements[i]].domElement.className+=" disabled";handlers.SetWinMode.action()},managedElements:["chromaKeyColor"]},chromaKeyColor:{name:"color",title:"Color",type:"select",data:[{value:0,title:"black"},{value:16777215,title:"white"},{value:16761358,title:"yellow"}],value:0,handler:["SetTransparentColor"],domElement:null,onChange:function(){handlers.SetTransparentColor.action()}},subtitlesState:{name:"subtitlesState",title:"State",type:"select",data:[{value:1,title:"on"},{value:0,title:"off"}],value:0,handler:["SetSubtitles"],domElement:null,onChange:function(){if(handlers.SetSubtitles.action(),parseInt(pageElements.subtitlesState.domElement.value)){for(var i=0;i<pageElements.subtitlesState.managedElements.length;i++)pageElements[pageElements.subtitlesState.managedElements[i]].domElement.disabled=!1,pageElements[pageElements.subtitlesState.managedElements[i]].domElement.className="";pageElements.subtitlesPID.onChange()}else for(var i=0;i<pageElements.subtitlesState.managedElements.length;i++)pageElements[pageElements.subtitlesState.managedElements[i]].domElement.disabled=!0,pageElements[pageElements.subtitlesState.managedElements[i]].domElement.className+=" disabled"},managedElements:["subtitlesPID","subtitlesStart","subtitlesEnd","subtitlesText","subtitlesFont","subtitlesFontSize","subtitlesOffset"]},subtitlesPID:{name:"subtitlesPID",title:"Track",type:"select",data:[],handler:["SetSubtitlePID"],domElement:null,onChange:function(){if(parseInt(pageElements.subtitlesState.domElement.value)&&"custom subtitles"===pageElements.subtitlesPID.domElement.value){for(var i=0;i<pageElements.subtitlesPID.managedElements.length;i++)pageElements[pageElements.subtitlesPID.managedElements[i]].domElement.disabled=!1,pageElements[pageElements.subtitlesPID.managedElements[i]].domElement.className="";handlers.ShowSubtitle.action(),setTimeout(function(){handlers.SetSubtitlesFont.action(),handlers.SetSubtitlesSize.action(),handlers.SetSubtitlesOffs.action()},0)}else{for(var i=0;i<pageElements.subtitlesPID.managedElements.length;i++)pageElements[pageElements.subtitlesPID.managedElements[i]].domElement.disabled=!0,
pageElements[pageElements.subtitlesPID.managedElements[i]].domElement.className+=" disabled";handlers.SetSubtitlePID.action()}},managedElements:["subtitlesStart","subtitlesEnd","subtitlesText","subtitlesFont","subtitlesFontSize"]},subtitlesStart:{name:"subtitlesStart",title:"Start (s)",type:"input",value:null,handler:["ShowSubtitle"],domElement:null},subtitlesEnd:{name:"subtitlesEnd",title:"End (s)",type:"input",value:null,handler:["ShowSubtitle"],domElement:null},subtitlesText:{name:"subtitlesText",title:"Text",type:"input",value:"Example text",handler:["ShowSubtitle"],domElement:null},subtitlesFont:{name:"subtitlesFont",title:"Font",type:"select",data:[],handler:["SetSubtitlesFont"],domElement:null,onChange:function(){handlers.SetSubtitlesFont.action(),setTimeout(function(){handlers.ShowSubtitle.action()},0)}},subtitlesFontSize:{name:"subtitlesFontSize",title:"Font size",type:"select",data:[{value:12,title:"12"},{value:16,title:"16"},{value:20,title:"20"},{value:24,title:"24"},{value:28,title:"28"},{value:32,title:"32"}],value:24,handler:["SetSubtitlesSize"],domElement:null,onChange:function(){handlers.SetSubtitlesSize.action()}},subtitlesOffset:{name:"subtitlesOffset",title:"Offset",type:"select",data:[{value:-100,title:"-100"},{value:0,title:"0"},{value:100,title:"100"},{value:200,title:"200"},{value:300,title:"300"},{value:400,title:"400"},{value:500,title:"500"}],value:0,handler:["SetSubtitlesOffs"],domElement:null,onChange:function(){handlers.SetSubtitlesOffs.action()}},audioState:{name:"audioState",title:"State",type:"select",data:[{value:0,title:"on"},{value:1,title:"off"}],value:0,handler:["SetMute"],domElement:null,onChange:function(){if(handlers.SetMute.action(),parseInt(pageElements.audioState.domElement.value))for(var i=0;i<pageElements.audioState.managedElements.length;i++)pageElements[pageElements.audioState.managedElements[i]].domElement.disabled=!0,pageElements[pageElements.audioState.managedElements[i]].domElement.className+=" disabled";else for(var i=0;i<pageElements.audioState.managedElements.length;i++)pageElements[pageElements.audioState.managedElements[i]].domElement.disabled=!1,pageElements[pageElements.audioState.managedElements[i]].domElement.className=""},managedElements:["audioPID"]},audioPID:{name:"audioPID",title:"Track",type:"select",data:[],handler:["SetAudioPID"],domElement:null,onChange:function(){handlers.SetAudioPID.action()}},playbackSpeed:{name:"playbackSpeed",title:"Speed",type:"select",data:[{value:1,title:"1x"},{value:2,title:"2x"},{value:3,title:"4x"},{value:4,title:"8x"},{value:8,title:"12x"},{value:5,title:"16x"}],value:1,handler:["SetSpeed"],domElement:null,onChange:function(){handlers.SetSpeed.action()}},playbackLoop:{name:"playbackLoop",title:"Repetition",type:"select",data:[{value:1,title:"on"},{value:0,title:"off"}],value:0,handler:["SetLoop"],domElement:null,onChange:function(){handlers.SetLoop.action()}}},elementsTree=[{name:"mediaContent",title:"Media content",inputs:["contentType","contentPath","contentSource","storageFile"]},{name:"videoWindow",title:"Video window",inputs:["windowMode","windowScale","windowWidth","windowHeight","coordX","coordY","windowAspect","windowOnTop"]},{name:"transparency",title:"Transparency",inputs:["videoWindow","graphicalWindow"]},{name:"chromaKey",title:"Chroma Key",inputs:["chromaKeyState","chromaKeyColor"]},{name:"subtitles",title:"Subtitles",inputs:["subtitlesState","subtitlesPID"]},{name:"customizableSubtitles",title:"Customizable subtitles",inputs:["subtitlesStart","subtitlesEnd","subtitlesText","subtitlesFont","subtitlesFontSize","subtitlesOffset"]},{name:"audio",title:"Audio",inputs:["audioState","audioPID"]},{name:"playback",title:"Playback",inputs:["playbackSpeed","playbackLoop"]}],handlers={PlaySolution:{active:!1,action:function(){"none"===navigationRows[pageElements.contentSource.domElement.number].style.display?gSTB.PlaySolution(pageElements.contentType.domElement.value,pageElements.contentPath.domElement.value):gSTB.PlaySolution(pageElements.contentType.domElement.value,pageElements.contentSource.domElement.value+"/"+pageElements.storageFile.domElement.value),setTimeout(function(){page.getSubtitlesPIDs(),page.getAudioPIDs(),pageElements.subtitlesState.onChange(),pageElements.subtitlesPID.onChange(),pageElements.audioPID.onChange()},2e3),this.active=!1}},SetPIG:{active:!1,action:function(){"custom"!==pageElements.windowScale.domElement.value&&(gSTB.SetPIG(pageElements.windowMode.domElement.value,pageElements.windowScale.domElement.value,pageElements.coordX.domElement.value,pageElements.coordY.domElement.value),this.active=!1)}},SetViewport:{active:!1,action:function(){"custom"===pageElements.windowScale.domElement.value&&(gSTB.SetViewport(pageElements.windowWidth.domElement.value,pageElements.windowHeight.domElement.value,pageElements.coordX.domElement.value,pageElements.coordY.domElement.value),this.active=!1)}},SetAspect:{active:!1,action:function(){parseInt(pageElements.windowMode.domElement.value)&&(gSTB.SetAspect(pageElements.windowAspect.domElement.value),this.active=!1)}},SetTopWin:{active:!1,action:function(){gSTB.SetTopWin(parseInt(pageElements.windowOnTop.domElement.value)),this.active=!1,parseInt(pageElements.windowOnTop.domElement.value)?contentWrapper.style.visibility="hidden":contentWrapper.style.visibility="visible"}},SetWinAlphaLevel:{active:!1,action:function(){gSTB.SetWinAlphaLevel(1,pageElements.videoWindow.domElement.value),gSTB.SetWinAlphaLevel(0,pageElements.graphicalWindow.domElement.value),this.active=!1}},SetWinMode:{active:!1,action:function(){gSTB.SetWinMode(1,parseInt(pageElements.chromaKeyState.domElement.value)),this.active=!1}},SetTransparentColor:{active:!1,action:function(){gSTB.SetTransparentColor(pageElements.chromaKeyColor.domElement.value),this.active=!1}},SetSubtitles:{active:!1,action:function(){gSTB.SetSubtitles(parseInt(pageElements.subtitlesState.domElement.value)),this.active=!1}},SetSubtitlePID:{active:!1,action:function(){"custom subtitles"!==pageElements.subtitlesPID.domElement.value&&(gSTB.SetSubtitlePID(parseInt(pageElements.subtitlesPID.domElement.value)),this.active=!1)}},ShowSubtitle:{active:!1,action:function(){gSTB.ShowSubtitle(1e3*parseInt(pageElements.subtitlesStart.domElement.value),1e3*parseInt(pageElements.subtitlesEnd.domElement.value),pageElements.subtitlesText.domElement.value),this.active=!1}},SetSubtitlesFont:{active:!1,action:function(){gSTB.SetSubtitlesFont(pageElements.subtitlesFont.domElement.value),this.active=!1}},SetSubtitlesSize:{active:!1,action:function(){gSTB.SetSubtitlesSize(parseInt(pageElements.subtitlesFontSize.domElement.value)),gSTB.ShowSubtitle(1e3*parseInt(pageElements.subtitlesStart.domElement.value),1e3*parseInt(pageElements.subtitlesEnd.domElement.value),pageElements.subtitlesText.domElement.value),this.active=!1}},SetSubtitlesOffs:{active:!1,action:function(){gSTB.SetSubtitlesOffs(parseInt(pageElements.subtitlesOffset.domElement.value)),this.active=!1}},SetMute:{active:!1,action:function(){gSTB.SetMute(parseInt(pageElements.audioState.domElement.value)),this.active=!1}},SetAudioPID:{active:!1,action:function(){gSTB.SetAudioPID(parseInt(pageElements.audioPID.domElement.value)),this.active=!1}},SetSpeed:{active:!1,action:function(){gSTB.SetSpeed(parseInt(pageElements.playbackSpeed.domElement.value)),this.active=!1}},SetLoop:{active:!1,action:function(){gSTB.SetLoop(parseInt(pageElements.playbackLoop.domElement.value)),this.active=!1}}},stbEvent={onEvent:function(event){switch(event=parseInt(event,10)){case 1:clearInterval(playbackTimer),parseInt(pageElements.playbackLoop.domElement.value,10)||(gSTB.Stop(),playbackStopped=!0,pageElements.windowOnTop.domElement.value="0",handlers.SetTopWin.action());break;case 7:var videoInfoData=gSTB.GetVideoInfo(),totalDuration=gSTB.GetMediaLen(),playbackSeconds=0,playbackMinutes=0,playbackHours=0,seconds=null,minutes=null,hours=null,miscalculation=null,i=null;if(clearInterval(playbackTimer),pageElements.storageFile.active){for(videoInfoData=videoInfoData.replace("{",""),videoInfoData=videoInfoData.replace("}",""),videoInfoData=videoInfoData.split(","),i=0;i<videoInfoData.length;i++)videoInfoData[i]=videoInfoData[i].substring(videoInfoData[i].indexOf(":")+1);minutes=Math.floor(totalDuration/60),seconds=minutes>0?totalDuration-60*minutes:totalDuration,hours=Math.floor(minutes/60),hours>0&&(minutes-=60*hours),miscalculation=totalDuration-(60*(60*hours+minutes)+seconds),10>seconds&&(seconds="0"+seconds),10>minutes&&(minutes="0"+minutes),10>hours&&(hours="0"+hours),playbackTimer=setInterval(function(){playbackSeconds++,playbackSeconds>60&&(playbackSeconds=0,playbackMinutes++,playbackMinutes>60&&(playbackMinutes=0,playbackHours++)),secondsSpan.innerText=10>playbackSeconds?"0"+playbackSeconds:playbackSeconds,minutesSpan.innerText=10>playbackMinutes?"0"+playbackMinutes:playbackMinutes,hoursSpan.innerText=10>playbackHours?"0"+playbackHours:playbackHours},1e3),secondsSpan.innerText="00",minutesSpan.innerText="00",hoursSpan.innerText="00",document.querySelector(".frame-rate").innerText=videoInfoData[0]/1e3,document.querySelector(".picture-width").innerText=videoInfoData[1],document.querySelector(".picture-height").innerText=videoInfoData[2],document.querySelector(".total-duration").innerText=hours+":"+minutes+":"+seconds,document.querySelector(".info-panel").style.display="block",document.querySelector(".storage").style.display="block",document.querySelector(".stream").style.display="none"}else{for(videoInfoData=gSTB.GetVideoInfo(),videoInfoData=videoInfoData.replace("{",""),videoInfoData=videoInfoData.replace("}",""),videoInfoData=videoInfoData.split(","),i=0;i<videoInfoData.length;i++)videoInfoData[i]=videoInfoData[i].substring(videoInfoData[i].indexOf(":")+1);document.querySelector(".frame-rate").innerText=videoInfoData[0]/1e3,document.querySelector(".picture-width").innerText=videoInfoData[1],document.querySelector(".picture-height").innerText=videoInfoData[2],document.querySelector(".info-panel").style.display="block",document.querySelector(".storage").style.display="none",document.querySelector(".stream").style.display="block"}}},onBroadcastMessage:function(id,message,data){if("storage.mount"===message||"storage.unmount"===message)switch(page.getStorageDevice(),document.activeElement.number){case 1:case 2:case 3:navigationRows[document.activeElement.number].className=defaultClassName,rowNumber=0,navigationRows[0].className+=" focused",navigationRows[0].innerElement.focus()}},event:0},page={init:function(){gSTB.SetListFilesExt("."+REGISTERED_TYPES.join(" .")),gSTB.InitPlayer(),gSTB.Play("rtp://239.1.1.1:1234"),gSTB.SetPIG(1,0,0,0),gSTB.SetTopWin(0),gSTB.SetWinAlphaLevel(0,200),gSTB.SetWinAlphaLevel(1,255),gSTB.SetWinMode(0,0),gSTB.SetWinMode(1,0),gSTB.EnableServiceButton(!1),gSTB.SetVolume(environment.audio_initial_volume=volume.def),this.generateElements(),this.getStorageDevice(),pageElements.windowMode.onChange(),pageElements.chromaKeyState.onChange(),pageElements.audioState.onChange(),setTimeout(function(){page.getSubtitlesPIDs(),page.getAudioPIDs(),pageElements.subtitlesState.onChange(),pageElements.subtitlesPID.onChange(),pageElements.audioPID.onChange()},2e3),this.getSubtitlesFonts(),secondsSpan=document.querySelector(".seconds"),minutesSpan=document.querySelector(".minutes"),hoursSpan=document.querySelector(".hours")},generateElements:function(){var headerTr,elementTr,titleTd,elementTd,input,option,parentDiv=document.getElementById("content"),table=element("table");contentWrapper=parentDiv.parentNode;for(var i=0;i<elementsTree.length;i++){headerTr=element("tr",{},element("td",{colSpan:2},element("p",{className:"header"},elementsTree[i].title))),table=elchild(table,headerTr);for(var j=0;j<elementsTree[i].inputs.length;j++){switch(elementTr=element("tr",{className:"elementTr",innerElement:null}),titleTd=element("td",{},element("p",{className:"title"},pageElements[elementsTree[i].inputs[j]].title+":")),pageElements[elementsTree[i].inputs[j]].type){case"input":input=element("input",{type:"text",value:pageElements[elementsTree[i].inputs[j]].value,number:j}),input.oninput=function(input,handler){return function(){for(var l=0;l<handler.length;l++)handlers[handler[l]].active=!0}}(input,pageElements[elementsTree[i].inputs[j]].handler),pageElements[elementsTree[i].inputs[j]].domElement=input,elementTr.innerElement=input,elementTd=element("td",{},element("div",{},input)),elementTr=elchild(elementTr,[titleTd,elementTd]);break;case"select":if(input=element("select",{number:j}),input.onÐ¡hange=function(input,handler,onChange){return function(){for(var l=0;l<handler.length;l++)handlers[handler[l]].active=!0;"function"==typeof onChange&&onChange()}}(input,pageElements[elementsTree[i].inputs[j]].handler,pageElements[elementsTree[i].inputs[j]].onChange),pageElements[elementsTree[i].inputs[j]].data.length>0)for(var k=0;k<pageElements[elementsTree[i].inputs[j]].data.length;k++)option=element("option",{value:pageElements[elementsTree[i].inputs[j]].data[k].value},pageElements[elementsTree[i].inputs[j]].data[k].title),pageElements[elementsTree[i].inputs[j]].data[k].value===pageElements[elementsTree[i].inputs[j]].value&&(option.selected=!0),input=elchild(input,option);pageElements[elementsTree[i].inputs[j]].domElement=input,elementTr.innerElement=input,elementTd=element("td",{},element("div",{className:"selectWrapper"},[element("div",{className:"arrowLeft"}),input,element("div",{className:"arrowRight"})])),elementTr=elchild(elementTr,[titleTd,elementTd])}table=elchild(table,elementTr)}elchild(parentDiv,table)}navigationRows=document.getElementsByClassName("elementTr"),navigationRows[rowNumber].className+=" focused",navigationRows[rowNumber].innerElement.focus()},getStorageDevice:function(){var option;if(getStorageInfo(),STORAGE_INFO.length){navigationRows[pageElements.contentPath.domElement.number].style.display="none",navigationRows[pageElements.contentSource.domElement.number].style.display="table-row",navigationRows[pageElements.storageFile.domElement.number].style.display="table-row",pageElements.playbackSpeed.domElement.disabled=!1,pageElements.playbackLoop.domElement.disabled=!1,pageElements.playbackSpeed.domElement.className="",pageElements.playbackLoop.domElement.className="",pageElements.storageFile.active=!0,elclear(pageElements.contentSource.domElement);for(var i=0;i<STORAGE_INFO.length;i++)option=element("option",{value:STORAGE_INFO[i].mountPath},STORAGE_INFO[i].label),elchild(pageElements.contentSource.domElement,option);this.getStorageFiles(pageElements.contentSource.domElement.value),handlers.PlaySolution.action()}else navigationRows[pageElements.contentSource.domElement.number].style.display="none",navigationRows[pageElements.storageFile.domElement.number].style.display="none",navigationRows[pageElements.contentPath.domElement.number].style.display="table-row",pageElements.playbackSpeed.domElement.disabled=!0,pageElements.playbackLoop.domElement.disabled=!0,pageElements.playbackSpeed.domElement.className+=" disabled",pageElements.playbackLoop.domElement.className+=" disabled",pageElements.storageFile.active=!1,handlers.PlaySolution.action()},getStorageFiles:function(mountPath){var option;eval(gSTB.ListDir(mountPath)),elclear(pageElements.storageFile.domElement);for(var i=0;i<files.length;i++)option=element("option",{value:files[i].name},files[i].name),elchild(pageElements.storageFile.domElement,option)},getVideoInfo:function(){var videoInfo={},videoInfoString;return videoInfoString=gSTB.GetVideoInfo(),videoInfoString="videoInfo = "+videoInfoString,videoInfo=eval(videoInfoString)},getSubtitlesPIDs:function(){var result=eval(gSTB.GetSubtitlePIDs()),subtitlesPIDs=[],option;if(result.length>0){for(var i=0;i<result.length;i++)for(var j=0;j<result[i].lang.length;j++){if(""!==result[i].lang[j]){subtitlesPIDs[i]={value:result[i].pid,title:result[i].lang[j]};break}subtitlesPIDs[i]={value:result[i].pid,title:result[i].pid}}subtitlesPIDs.push({value:"custom subtitles",title:"custom subtitles"})}else subtitlesPIDs[0]={value:"custom subtitles",title:"custom subtitles"};elclear(pageElements.subtitlesPID.domElement);for(var i=0;i<subtitlesPIDs.length;i++)option=element("option",{value:subtitlesPIDs[i].value},subtitlesPIDs[i].title),elchild(pageElements.subtitlesPID.domElement,option)},getSubtitlesFonts:function(){var fonts=[],option;eval(gSTB.ListDir(fontPath));for(var i=0;i<files.length;i++)-1!==files[i].name.indexOf(".ttf")&&fonts.push(files[i].name);if(elclear(pageElements.subtitlesFont.domElement),fonts.length>0)for(var i=0;i<fonts.length;i++)option=element("option",{value:fontPath+"/"+fonts[i]},fonts[i]),elchild(pageElements.subtitlesFont.domElement,option);else option=element("option",{value:"no fonts"},"no fonts"),elchild(pageElements.subtitlesFont.domElement,option)},getAudioPIDs:function(){var result=eval(gSTB.GetAudioPIDs()),audioPIDs=[],option;if(result.length>0)for(var i=0;i<result.length;i++)for(var j=0;j<result[i].lang.length;j++){if(""!==result[i].lang[j]){audioPIDs[i]={value:result[i].pid,title:result[i].lang[j]};break}audioPIDs[i]={value:result[i].pid,title:result[i].pid}}else audioPIDs[0]={value:"no audio",title:"no audio"};elclear(pageElements.audioPID.domElement);for(var i=0;i<audioPIDs.length;i++)option=element("option",{value:audioPIDs[i].value},audioPIDs[i].title),elchild(pageElements.audioPID.domElement,option)},filteringNumericData:function(){this.value<+this.minValue&&(this.value=this.minValue)},applyChanges:function(){for(var handler in handlers)handlers[handler].active&&handlers[handler].action()},isNumber:function(value){return!isNaN(parseFloat(value))&&isFinite(value)},showY:function(element){var parentDiv=document.getElementById("content"),OTe=element.offsetTop,OHe=element.offsetHeight,STc=parentDiv.scrollTop,OHc=parentDiv.offsetHeight;STc>OTe||OHe>OHc?OTe===OHe?parentDiv.scrollTop=0:parentDiv.scrollTop=OTe:OTe+OHe>STc+OHc&&(parentDiv.scrollTop=OTe+OHe-OHc)},volumeSetVolume:function(vol){volume.timer&&clearTimeout(volume.timer);var step_px;step_px=1920==WINDOW_WIDTH?15:10;var valueDiv=document.getElementById("volumeForm"),volumeNum=document.getElementById("volume_num"),bar=document.getElementById("volume_right"),control=document.getElementById("volume_bar"),vol_idx=vol/5;if(vol_idx){var value=vol_idx*step_px-5;bar.style.width=value+"px",control.style.visibility="visible"}else control.style.visibility="hidden";volumeNum.innerHTML=environment.audio_initial_volume+"%",gSTB.SetVolume(vol),volume.timer=setTimeout(page.volumeCloseForm,volume.hideTimeOut),valueDiv.style.visibility="visible"},volumeCloseForm:function(){volume.timer=null,document.getElementById("volumeForm").style.visibility="hidden",environment.audio_initial_volume>=5&&(document.getElementById("volume_bar").style.visibility="hidden")},onKeyDown:function(event){var activeElement=document.activeElement;if(eventPrepare(event))switch(event.code){case KEYS.OK:if(parseInt(pageElements.windowOnTop.domElement.value,10)){event.preventDefault(),event.stopPropagation();break}"select-one"===activeElement.type?(this.applyChanges(),event.preventDefault()):this.applyChanges();break;case KEYS.UP:if(parseInt(pageElements.windowOnTop.domElement.value,10)){event.preventDefault(),event.stopPropagation();break}event.preventDefault();for(var i=rowNumber-1;i>=0;i--)if("none"!==navigationRows[i].style.display){navigationRows[rowNumber].className=defaultClassName,rowNumber=i,this.showY(navigationRows[i]),navigationRows[i].className+=" focused",navigationRows[i].innerElement.focus(),"text"!==navigationRows[i].innerElement.type||navigationRows[i].innerElement.disabled||navigationRows[i].innerElement.select();break}break;case KEYS.DOWN:if(parseInt(pageElements.windowOnTop.domElement.value,10)){event.preventDefault(),event.stopPropagation();break}event.preventDefault();for(var i=rowNumber+1;i<navigationRows.length;i++)if("none"!==navigationRows[i].style.display){navigationRows[rowNumber].className=defaultClassName,rowNumber=i,this.showY(navigationRows[i]),navigationRows[i].className+=" focused",navigationRows[i].innerElement.focus(),"text"!==navigationRows[i].innerElement.type||navigationRows[i].innerElement.disabled||navigationRows[i].innerElement.select();break}break;case KEYS.LEFT:case KEYS.RIGHT:if(parseInt(pageElements.windowOnTop.domElement.value,10)){event.preventDefault(),event.stopPropagation();break}if(navigationRows[rowNumber].innerElement.disabled){event.preventDefault();break}"select-one"===activeElement.type&&setTimeout(function(){activeElement.onÐ¡hange()},0);break;case KEYS.PAGE_UP:case KEYS.PAGE_DOWN:if(parseInt(pageElements.windowOnTop.domElement.value,10)){event.preventDefault(),event.stopPropagation();break}"select-one"===activeElement.type&&event.preventDefault();break;case KEYS.PLAY_PAUSE:gSTB.IsPlaying()?gSTB.Pause():playbackStopped?(handlers.PlaySolution.action(),playbackStopped=!1):gSTB.Continue();break;case KEYS.EXIT:"0"!==pageElements.windowOnTop.domElement.value&&(pageElements.windowOnTop.domElement.value="0",handlers.SetTopWin.action()),"0"===pageElements.windowOnTop.domElement.value&&(gSTB.Stop(),document.body.style.display="none",gSTB.LoadURL(PATH_SYSTEM+"pages/loader/index.html"));break;case KEYS.VOLUME_UP:environment.audio_initial_volume<100&&(environment.audio_initial_volume+=volume.step),page.volumeSetVolume(environment.audio_initial_volume),event.preventDefault(),event.stopPropagation();break;case KEYS.VOLUME_DOWN:environment.audio_initial_volume>0&&(environment.audio_initial_volume-=volume.step),page.volumeSetVolume(environment.audio_initial_volume),event.preventDefault(),event.stopPropagation()}}};